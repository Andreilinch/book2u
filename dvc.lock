schema: '2.0'
stages:
  clean_data:
    cmd: python ./src/data/data_cleanser.py ./data/raw/GoodReads_100k_books.csv ./data/interim/GoodReads_books_clean.parquet
    deps:
    - path: ./data/raw/GoodReads_100k_books.csv
      md5: cbc104379fdcc733a04ee499298ce133
      size: 120165547
    - path: ./src/data/data_cleanser.py
      md5: 469f3273f9446f5e238776dd7c9fe111
      size: 4464
    outs:
    - path: ./data/interim/GoodReads_books_clean.parquet
      md5: 87090f189597833999b3ff7604c6b41e
      size: 31158809
  generate_extended_text:
    cmd: python ./src/features/text_features_generator.py ./data/interim/GoodReads_books_clean.parquet
      ./data/interim/extended_descriptions.parquet
    deps:
    - path: ./data/interim/GoodReads_books_clean.parquet
      md5: 87090f189597833999b3ff7604c6b41e
      size: 31158809
    - path: ./src/features/text_features_generator.py
      md5: 19b286929913a2ef8ec413caa9e4d920
      size: 3047
    outs:
    - path: ./data/interim/extended_descriptions.parquet
      md5: 1301e602b10eabc1820fb295ca852e46
      size: 27445122
    - path: ./data/interim/extended_max_descriptions.parquet
      md5: 90e07fef548cce5eda1b99c278602ea3
      size: 29621926
  generate_vectorized_text:
    cmd: python ./src/models/text_vectorizer.py ./data/interim/extended_descriptions.parquet
      ./data/processed/description_vectorized.parquet params.yaml
    deps:
    - path: ./data/interim/extended_descriptions.parquet
      md5: 1301e602b10eabc1820fb295ca852e46
      size: 27445122
    - path: ./src/models/text_vectorizer.py
      md5: 45f424890680f5547eb8256138ac27a1
      size: 3797
    params:
      params.yaml:
        vectorize.batch_size: 100
    outs:
    - path: ./data/processed/description_vectorized.parquet
      md5: 3f2d87e757d0f6836180f67d7ad10c1b
      size: 188340334
  generate_short_vectorized_text:
    cmd: python ./src/models/text_vectorizer.py ./data/interim/GoodReads_books_clean.parquet
      ./data/processed/short_description_vectorized.parquet params.yaml
    deps:
    - path: ./data/interim/GoodReads_books_clean.parquet
      md5: 87090f189597833999b3ff7604c6b41e
      size: 31158809
    - path: ./src/models/text_vectorizer.py
      md5: 45f424890680f5547eb8256138ac27a1
      size: 3797
    params:
      params.yaml:
        vectorize.batch_size: 100
    outs:
    - path: ./data/processed/short_description_vectorized.parquet
      md5: ce9d1b438b8402d266f6f53fc0c45185
      size: 188289845
  generate_max_vectorized_text:
    cmd: python ./src/models/text_vectorizer.py ./data/interim/extended_max_descriptions.parquet
      ./data/processed/max_description_vectorized.parquet params.yaml
    deps:
    - path: ./data/interim/extended_max_descriptions.parquet
      md5: 90e07fef548cce5eda1b99c278602ea3
      size: 29621926
    - path: ./src/models/text_vectorizer.py
      md5: 45f424890680f5547eb8256138ac27a1
      size: 3797
    params:
      params.yaml:
        vectorize.batch_size: 100
    outs:
    - path: ./data/processed/max_description_vectorized.parquet
      md5: 402d0fcaad995b216fc2480556f2ed1d
      size: 188342105
